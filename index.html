<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Ivan Posting Images"
    />
    <title>ipi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jacquarda+Bastarda+9&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1>
          Ivan
          <br />
          Posting
          <br />
          Images
        </h1>
      </header>
      <div class="feed" id="feed">
        
      </div>
    </div>

  <script>
    const posts = [
      {
        id: 2,
        imageUrls: ['posts/2_1.jpeg', 'posts/2_2.jpeg', 'posts/2_3.jpeg'],
        location: 'Paris, France',
        description: 'Second',
      },
      {
        id: 1,
        imageUrls: ['posts/1_1.jpeg', 'posts/1_2.jpeg', 'posts/1_3.jpeg'],
        location: 'Chicago, IL',
        description: 'First',
      },
    ]

    const feedEl = document.getElementById('feed')

    let scrollTimeout

    posts.forEach((post) => {
      const postEl = document.createElement('div')
      postEl.className = 'post'

      const postHeaderEl = document.createElement('div')
      postHeaderEl.className = 'post__header'

      const avatarEl = document.createElement('img')
      avatarEl.src = 'profile.jpeg'
      avatarEl.className = 'post__avatar'

      const postHeaderDetailsEl = document.createElement('div')
      
      const usernameEl = document.createElement('a')
      usernameEl.innerText = 'ivanturianytsia'
      usernameEl.href = 'https://turianytsia.com'
      usernameEl.target='_blank'
      usernameEl.rel='noreferrer'

      const locationEl = document.createElement('div')
      locationEl.innerText = post.location

      postHeaderDetailsEl.appendChild(usernameEl)
      postHeaderDetailsEl.appendChild(locationEl)

      postHeaderEl.appendChild(avatarEl)
      postHeaderEl.appendChild(postHeaderDetailsEl)

      const carouselEl = document.createElement('div')
      carouselEl.className = 'post__carousel'

      carouselEl.addEventListener('scroll', (event) => {
        event.preventDefault()
        event.stopPropagation()

        if (scrollTimeout) {
          clearTimeout(scrollTimeout)
        }

        const scrollLeft = carouselEl.scrollLeft
        const containerWidth = carouselEl.offsetWidth

        scrollTimeout = setTimeout(() => {
          const scrollToPost = Math.round(carouselEl.scrollLeft / containerWidth)

          carouselEl.scrollTo({
            left: scrollToPost * containerWidth,
            top: 0,
            behavior: 'smooth'
          });
        }, 50)
      })

      post.imageUrls.forEach((imageUrl) => {
        carouselEl.appendChild(createImgEl(imageUrl))
      })

      postEl.appendChild(postHeaderEl)
      postEl.appendChild(carouselEl)

      feedEl.appendChild(postEl)
    })

    function createImgEl(imageUrl) {
      const imgEl = document.createElement('img')
      imgEl.src = imageUrl
      imgEl.className = 'post__img'
      return imgEl
    }
  </script>
  </body>
</html>
